!function(t,i){"use strict";i.OptionContainer=i.Class.extend({id:null,element:null,options:null,fields:null,loaded:!1,containerHolder:null,initialize:function(t,n,e,a,o){this.id=t,this.element=n,this.ajax=o,this.fields=new i.Values({defaultConstructor:i.Fields}),this.values=a,this.setContainerHolder(),this.populateFields(e),this.loadContainer(),this.saveAjax()},saveAjax:function(){this.ajax&&t("."+this.id).find("input[type='submit']").on("click",function(t){t.preventDefault();var i={};this.fields.each(function(t){var n=t.value.get();i[t.id]=n}),this.saveGlobalOption(i)}.bind(this))},saveGlobalOption:function(i){var n=t("."+this.id).find(".wvt-panorama-button"),e=t(n).find("input");n.addClass("saving"),e.val(wvt_global.lang.saving),wp.ajax.send("save_global_option",{data:{data:i,nonce:wvt_global.nonce}}).done(function(t){n.addClass("saved"),e.val(wvt_global.lang.saved),setTimeout(function(){n.removeClass("saving saved"),e.val(wvt_global.lang.save)},1500)})},setContainerHolder:function(){this.containerHolder=i.optioncontainer},populateFields:function(t){t=this.prepareField(t),this.setupField(this.id,t)},prepareField:function(t){var i=this.prepareFieldData.bind(this),n=0;return t=wvt.helper.prioritySort(t),_.each(t,function(e,a){t[a]=i(e,n++)}),t},prepareFieldData:function(t){return t.parent=this,t.value=this.values[t.id],t},setupField:function(t,n){var e=null;_.each(n,function(t){e=_.has(i.fieldConstructor,t.type)?i.fieldConstructor[t.type]:i.fieldConstructor.standart,this.fields.has(t.id)||this.fields.add(t.id,new e(t.id,t))}.bind(this))},loadContainer:function(){this.triggerFinish()},triggerFinish:function(){this.loaded=!0,this.containerHolder.trigger(this.id,this)}}),i.optioncontainer=new i.Values({defaultConstructor:i.OptionContainer}),window.wvt=window.wvt||{},wvt.option={},wvt.option.build=function(n,e,a,o,s){var l=t("#"+e);return i.optioncontainer.add(n,new i.OptionContainer(n,l,a,o,s))}}(jQuery,wp.customize);